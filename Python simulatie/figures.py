import sys
import matplotlib.pyplot as plt
from matplotlib.path import Path
import matplotlib.patches as patches

def print_letter(letter_array):
    fig = plt.figure()
    codes = [Path.MOVETO, Path.CURVE3, Path.CURVE3]
    ax = fig.add_subplot(1, 1, 1)

    for bezier in letter_array:
        ax.add_patch(patches.PathPatch(Path(bezier, codes), facecolor='none', lw=2))
        xs, ys = zip(*bezier)
        ax.plot(xs, ys, 'x--', lw=1, color='grey', ms=10)


    ax.set_xlim(-0.1, 1.1)
    ax.set_ylim(-0.1, 1.1)
    plt.gca().invert_yaxis()
    plt.show()
    plt.close()

def construct_c_code(letter_array, letter):
    print("printCharToLCD('%s', 1, 1);" % letter)
    i = 0
    for bezier in letter_array:
        print("bp%d = create_BP(%.2f, %.2f, %.2f, %.2f, %.2f, %.2f);" % (i, bezier[0][0], bezier[0][1], bezier[1][0], bezier[1][1], bezier[2][0], bezier[2][1]))
        i += 1

    print("BP* letter_%s_array[%i] = { " % (letter, i), end='', flush=True)
    
    for bp in range(i-1):
        print("bp%d, " % (bp), end='', flush=True)
    
    print("bp%d };" % (i-1))
    print("draw_figure(%d, letter_%s_array);" % (i, letter))

    for bp in range(i):
        print("free(bp%s);" % bp)
    
    print("break;")

a1 = [(0,0.75),(0,0.5),(0.2,0.5)]
a2 = [(0.2,0.5),(0.4,0.5),(0.4,0.75)]
a3 = [(0.4,0.75),(0.4,1),(0.2,1)]
a4 = [(0.2,1),(0,1),(0,0.75)]
a5 = [(0,0.75),(0,1),(0.2,1)]
a6 = [(0.2,1),(0.4,1),(0.4,0.75)]
a7 = [(0.4,0.75),(0.4,0.625),(0.4,0.5)]
a8 = [(0.4,0.5),(0.4,0.625),(0.4,0.75)]
a9 = [(0.4,0.75),(0.4,1.25),(0.5,0.75)]

letter_a = [a1, a2, a3, a4, a5, a6, a7, a8, a9]

b1 = [(0,0.75),(0.3,0.5),(0.25,0.1)]
b2 = [(0.25,0.1),(0.15,0),(0.1,0.1)]
b3 = [(0.1,0.1),(0.1,0.35),(0.1,0.75)]
b4 = [(0.1,0.75),(0.15,1),(0.25,1)]
b5 = [(0.25,1),(0.35,1),(0.4,0.75)]
b6 = [(0.4,0.75),(0.45,0.75),(0.5,0.75)]

letter_b = [b1, b2, b3, b4, b5, b6]

c1 = [(0,0.75),(0.05,0.55),(0.25,0.5)]
c2 = [(0.25,0.5),(0.05,0.55),(0,0.75)]
c3 = [(0,0.75),(0,1),(0.25,1)]
c4 = [(0.25,1),(0.4,0.9),(0.45,0.75)]
c5 = [(0.45,0.75),(0.47,0.75),(0.5,0.75)]

letter_c = [c1, c2, c3, c4, c5]

d1 = [(0,0.75),(0,0.5),(0.2,0.5)]
d2 = [(0.2,0.5),(0.4,0.5),(0.4,0.75)]
d3 = [(0.4,0.75),(0.4,1),(0.2,1)]
d4 = [(0.2,1),(0,1),(0,0.75)]
d5 = [(0,0.75),(0,1),(0.2,1)]
d6 = [(0.2,1),(0.4,1),(0.4,0.75)]
d7 = [(0.4,0.75),(0.4,0.5),(0.4,0)]
d8 = [(0.4,0),(0.4,0.5),(0.4,0.75)]
d9 = [(0.4,0.75),(0.4,1.25),(0.5,0.75)]

letter_d = [d1, d2, d3, d4, d5, d6, d7, d8, d9]


e1 = [(0,0.75),(0.1,1),(0.125,1)]
e2 = [(0.125,1),(0.15,1),(0.25,0.9)]
e3 = [(0.25,0.9),(0.45,0.625),(0.25,0.5)]
e4 = [(0.25,0.5),(0.05,0.625),(0.25,0.9)]
e5 = [(0.25,0.9),(0.35,1),(0.375,1)]
e6 = [(0.375,1),(0.4,1),(0.5,0.75)]

letter_e = [e1, e2, e3, e4, e5, e6]

f1 = [(0,0.75),(0.4,0.5),(0.35,0.1)]
f2 = [(0.35,0.1),(0.25,0),(0.2,0.1)]
f3 = [(0.2,0.1),(0.2,0.35),(0.2,1)]
f4 = [(0.2,1),(0.2,0.75),(0.2,0.65)]
f5 = [(0.2,0.65),(0.1, 0.65),(0.05,0.65)]
f6 = [(0.05,0.65),(0.2, 0.65),(0.5,0.65)]

letter_f = [f1, f2, f3, f4, f5, f6]

g1 = [(0,0.75),(0.1,0.75),(0.1,0.5)]
g2 = [(0.1,0.5),(0.1,0.25),(0.25,0.25)]
g3 = [(0.25,0.25),(0.4,0.25),(0.4,0.5)]
g4 = [(0.4,0.5),(0.4,0.75),(0.25,0.75)]
g5 = [(0.25,0.75),(0.1,0.75),(0.1,0.5)]
g6 = [(0.1,0.5),(0.1,0.75),(0.25,0.75)]
g7 = [(0.25,0.75),(0.4,0.75),(0.4,0.5)]
g8 = [(0.4,0.5),(0.4,1),(0.25,1)]
g9 = [(0.25,1),(0.2,1),(0.25,0.9)]
g10 = [(0.25,0.9),(0.3,0.85),(0.5,0.75)]

letter_g = [g1, g2, g3, g4, g5, g6, g7, g8, g9, g10]

h1 = [(0,0.75),(0.25,0.5),(0.25,0.25)]
h2 = [(0.25,0.25),(0.175,0),(0.1,0.25)]
h3 = [(0.1,0.25),(0.1,0.75),(0.1,1)]
h4 = [(0.1,1),(0.1,0.8),(0.1,0.75)]
h5 = [(0.1,0.75),(0.35,0.4),(0.35,0.95)]
h6 = [(0.35,0.95),(0.35,1),(0.5,0.75)]

letter_h = [h1, h2, h3, h4, h5, h6]

i1 = [(0,0.75),(0.25,1),(0.25,0.5)]
i2 = [(0.25,0.5),(0.25,1),(0.5,0.75)]

letter_i = [i1, i2]

j1 = [(0,0.75),(0.25,0.75),(0.25,0.5)]
j2 = [(0.25,0.5),(0.25,1),(0.1,1)]
j3 = [(0.1,1),(0,0.9),(0.5,0.75)]

letter_j = [j1, j2, j3]

k1 = [(0,0.75),(0.25,0.5),(0.25,0.25)]
k2 = [(0.25,0.25),(0.175,0),(0.1,0.25)]
k3 = [(0.1,0.25),(0.1,0.75),(0.1,1)]
k4 = [(0.1,1),(0.1,0.8),(0.1,0.65)]
k5 = [(0.1,0.65),(0.25,0.55),(0.25,0.75)]
k6 = [(0.25,0.75),(0.2,1),(0.1,0.8)]
k7 = [(0.1,0.8),(0.15,1),(0.3,1)]
k8 = [(0.3,1),(0.4,1),(0.5,0.75)]

letter_k = [k1, k2, k3, k4, k5, k6, k7, k8]

l1 = [(0,0.75),(0.1,1),(0.125,1)]
l2 = [(0.125,1),(0.15,1),(0.25,0.9)]
l3 = [(0.25,0.9),(0.4,0.5),(0.35,0.25)]
l4 = [(0.35,0.25),(0.25,0),(0.15,0.25)]
l5 = [(0.15,0.25),(0.1,0.5),(0.25,0.9)]
l6 = [(0.25,0.9),(0.35,1),(0.375,1)]
l7 = [(0.375,1),(0.4,1),(0.5,0.75)]

letter_l = [l1, l2, l3, l4, l5, l6, l7]

m1 = [(0,0.75),(0.05,0.9),(0.1,0.6)]
m2 = [(0.1,0.6),(0.2,0.5),(0.2,1)]
m3 = [(0.2,1),(0.2,0.55),(0.25,0.55)]
m4 = [(0.25,0.55),(0.3,0.55),(0.3,1)]
m5 = [(0.3,1),(0.3,0.5),(0.4,0.6)]
m6 = [(0.4,0.6),(0.45,0.9),(0.5,0.75)]

letter_m = [m1, m2, m3, m4, m5, m6]

n1 = [(0,0.75),(0.1,0.9),(0.15,0.6)]
n2 = [(0.15,0.6),(0.3,0.4),(0.275,1)]
n3 = [(0.275,1),(0.3,0.55),(0.35,0.55)]
n4 = [(0.35,0.55),(0.40,0.55),(0.4,0.675)]
n5 = [(0.4,0.675),(0.45,0.9),(0.5,0.75)]

letter_n = [n1, n2, n3, n4, n5]

o1 = [(0,0.75),(0,0.5),(0.2,0.5)]
o2 = [(0.2,0.5),(0.4,0.5),(0.4,0.75)]
o3 = [(0.4,0.75),(0.4,1),(0.2,1)]
o4 = [(0.2,1),(0,1),(0,0.75)]
o5 = [(0,0.75),(0,1),(0.2,1)]
o6 = [(0.2,1),(0.4,1),(0.4,0.75)]
o7 = [(0.4,0.75),(0.4,1.25),(0.5,0.75)]

letter_o = [o1, o2, o3, o4, o5, o6, o7]

p1 = [(0,0.75),(0.15,0.75),(0.2,0.5)]
p2 = [(0.2,0.5),(0.2,0.75),(0.2,1)]
p3 = [(0.2,1),(0.2,0.75),(0.2,0.5)]
p4 = [(0.2,0.5),(0.25, 0.35),(0.3,0.5)]
p5 = [(0.3,0.5),(0.35,0.75),(0.5,0.75)]

letter_p = [p1, p2, p3, p4, p5]

q1 = [(0,0.75),(0.1,0.75),(0.1,0.5)]
q2 = [(0.1,0.5),(0.1,0.25),(0.25,0.25)]
q3 = [(0.25,0.25),(0.4,0.25),(0.4,0.5)]
q4 = [(0.4,0.5),(0.4,0.75),(0.25,0.75)]
q5 = [(0.25,0.75),(0.1,0.75),(0.1,0.5)]
q6 = [(0.1,0.5),(0.1,0.75),(0.25,0.75)]
q7 = [(0.25,0.75),(0.4,0.75),(0.4,0.5)]
q8 = [(0.4,0.5),(0.4,0.75),(0.4,1)]
q9 = [(0.4,1),(0.4,0.75),(0.4,0.5)]
q10 = [(0.4,0.5),(0.4,0.75),(0.5,0.75)]

letter_q = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]

r1 = [(0,0.75),(0.1,0.625),(0.1,0.5)]
r2 = [(0.1,0.5),(0.25,0.55),(0.4,0.5)]
r3 = [(0.4,0.5),(0.35,1),(0.45,1)]
r4 = [(0.45,1),(0.5,1),(0.5,0.75)]

letter_r = [r1, r2, r3, r4]

s1 = [(0,0.75),(0.15,0.7),(0.35, 0.5)]
s2 = [(0.35, 0.5),(0.4, 0.5),(0.35,0.75)]
s3 = [(0.35,0.75),(0.3,1),(0.1,0.7)]
s4 = [(0.1,0.7),(0.3,1),(0.35,0.75)]
s5 = [(0.35,0.75),(0.4,0.65),(0.5,0.75)]

letter_s = [s1, s2, s3, s4, s5]

t1 = [(0,0.75),(0.15,0.75),(0.15,0)]
t2 = [(0.15,0),(0.15,0.2),(0.15,0.45)]
t3 = [(0.15,0.45),(0.25,0.4),(0.35,0.35)]
t4 = [(0.35,0.35),(0.25,0.4),(0.15,0.45)]
t5 = [(0.15,0.45),(0.15,0.65),(0.15,0.75)]
t6 = [(0.15,0.75),(0.15,1),(0.35,1)]
t7 = [(0.35,1),(0.45,1),(0.5,0.75)]

letter_t = [t1, t2, t3, t4, t5, t6, t7]

u1 = [(0,0.75),(0.1,0.75),(0.1,0.5)]
u2 = [(0.1,0.5),(0.1,1),(0.25,1)]
u3 = [(0.25,1),(0.4,1),(0.4,0.5)]
u4 = [(0.4,0.5),(0.4,0.75),(0.5,0.75)]

letter_u = [u1, u2, u3, u4]

v1 = [(0,0.75),(0.05,0.75),(0.05,0.5)]
v2 = [(0.05,0.5),(0.1,0.55),(0.15,0.5)]
v3 = [(0.15,0.5),(0.15,1),(0.25,1)]
v4 = [(0.25,1),(0.35,1),(0.35,0.5)]
v5 = [(0.35,0.5),(0.4,0.55),(0.45,0.5)]
v6 = [(0.45,0.5),(0.45,0.75),(0.5,0.75)]

letter_v = [v1, v2, v3, v4, v5, v6]

w1 = [(0,0.75),(0.05,0.25),(0.2,1)]
w2 = [(0.2,1),(0.25,1),(0.25,0.8)]
w3 = [(0.25,0.8),(0.25,1),(0.3,1)]
w4 = [(0.3,1),(0.35,0.25),(0.5,0.75)]

letter_w = [w1, w2, w3, w4]

x1 = [(0,0.75),(0.1,1),(0.125,1)]
x2 = [(0.125,1),(0.15,1),(0.25,0.8)]

x3 = [(0.25,0.8),(0.25,0.35),(0.05,0.5)]
x4 = [(0.05,0.5),(0.25,0.35),(0.25,0.8)]

x5 = [(0.25,0.8),(0.25,0.35),(0.45,0.5)]
x6 = [(0.45,0.5),(0.25,0.35),(0.25,0.8)]

x7 = [(0.25,0.8),(0.35,1),(0.375,1)]
x8 = [(0.375,1),(0.4,1),(0.5,0.75)]

letter_x = [x1, x2, x3, x4, x5, x6, x7, x8]

y1 = [(0,0.75),(0.1,0.75),(0.1,0.5)]
y2 = [(0.1,0.5),(0.1,0.75),(0.25,0.75)]
y3 = [(0.25,0.75),(0.4,0.75),(0.4,0.5)]
y4 = [(0.4,0.5),(0.4,1),(0.25,1)]
y5 = [(0.25,1),(0.2,1),(0.25,0.9)]
y6 = [(0.25,0.9),(0.3,0.85),(0.5,0.75)]

letter_y = [y1, y2, y3, y4, y5, y6]